# 16 Vue3 基础与迁移要点

## 适用范围

- 在 uni-app Vue3 项目中处理语法升级、迁移兼容、模板行为差异时使用。

## 规则

- uni-app Vue3 入口遵循 Vue3 应用初始化方式，避免沿用旧版 Vue2 全局 API 写法。
- 新组件优先使用 `setup` / `script setup`，并显式声明 `props/emits`。
- 多个 `v-model` 绑定使用 Vue3 约定（`modelValue` + `update:modelValue` 或参数化写法）。
- `v-bind` 对象合并顺序以书写顺序为准，冲突场景必须显式声明优先级。
- `v-if` 与 `v-for` 同节点时按 Vue3 规则处理，复杂场景优先拆分模板节点提升可读性。
- `key` 使用策略遵循 Vue3 约束：唯一、稳定、语义化，不依赖索引与随机值。
- 性能优化按需使用 `v-memo`，仅针对大列表和高频更新热点，不做全局滥用。
- 历史 Vue2 项目迁移时，兼容构建开关仅作为过渡手段，最终以原生 Vue3 写法收敛。

## 示例

- 组件显式声明 `emits`，避免事件透传不清晰。
- 表单组件采用 `v-model` 新语义，与 `update:*` 事件对齐。
- 列表渲染使用业务主键作为 `key`，并拆分条件渲染节点。
- 高频列表局部使用 `v-memo`，并通过性能对比验证收益。

## 反例

- 在 Vue3 项目沿用 Vue2 组件选项习惯，导致事件与双绑行为不一致。
- `v-bind="obj"` 与字面量属性混写但未考虑顺序，出现覆盖误判。
- 将 `v-if` 与 `v-for` 长期堆在同节点，模板复杂且难维护。
- 为“看起来更快”在全页面滥用 `v-memo`，增加维护成本且收益不明显。

## 检查项

- 组件是否遵循 Vue3 的 `props/emits/v-model` 语义。
- 模板中 `v-bind` 合并顺序、`v-if/v-for` 组合是否可读且行为明确。
- `key` 是否稳定且具业务语义。
- 性能优化手段是否按需启用并有验证依据。
- 迁移兼容配置是否有下线计划与时间点。

## 来源

- 官方教程（2026-02-11 查阅）：https://uniapp.dcloud.net.cn/tutorial/vue3-basics.html
