# 当前开发任务

## 阶段 1 - MVP

- [x] 完成图片上传流程（H5 + 微信小程序 + Android/iOS App）。
- [x] 完成 Canvas 切片核心算法封装（`src/utils/image.ts`）。
- [x] 完成切片预览展示。
- [x] 完成单张切片下载/保存（H5 下载、微信保存、App 保存）。
- [x] 完成 App 端权限与保存适配（`APP-ANDROID` / `APP-IOS`）。
- [ ] 完成主链路多端测试与问题修复。

## 阶段 2 - 优化

- [x] 支持 gap（切片间距）参数。
- [x] 支持批量图片处理。
- [x] 支持 H5 Zip 打包下载（导出全部）。
- [ ] 优化大图性能与内存占用。

## 执行顺序（建议）

1. 图片上传 -> 参数校验（先保证输入正确）。
2. 切片算法 -> 预览展示（先保证结果可见）。
3. 下载/保存 -> 权限适配（再补 App 端能力）。
4. 多端回归（H5 + 微信 + Android + iOS）。

## 完成定义（DoD）

- 每个任务至少在 H5 + 微信小程序 + Android App + iOS App 完成一次手工验证。
- 每个任务完成后补一条验证记录（见下方模板）。
- 阶段 1 全部完成后，再进入阶段 2。

## 执行规则

- 实现前先对齐 `docs/START.md` 与 `docs/business/10-slice-module.md`。
- 每完成一项任务，同步更新勾选状态与验证记录。

## 当前进度

- [x] 完成图片上传流程（代码已落地）。
- [x] 完成 Canvas 切片核心算法封装（代码已落地）。
- [x] 完成切片预览展示（代码已落地）。
- [x] 完成 gap 参数支持（代码已落地，待多端回归验证）。
- [x] 完成批量图片切片与导出（代码已落地，待多端回归验证）。
- [x] 完成切片导出能力（H5 Zip 下载、微信/App 保存到相册，待多端实机验证）。
- [x] App 端权限细化与异常分支补齐（代码已落地，待真机验证）。
- [ ] H5 + 微信 + Android + iOS 主链路回归验证。

## 验证记录模板

- 任务：
- 平台：H5 / 微信小程序 / Android App / iOS App
- 结果：通过 / 不通过
- 备注：

## 验证记录

- 任务：H5 导出全部（Zip 打包下载）
- 平台：H5
- 结果：通过
- 备注：切片后点击“导出全部”可下载 `slice-all.zip`，解压后图片张数与切片数量一致；微信小程序/Android/iOS 待继续回归。
