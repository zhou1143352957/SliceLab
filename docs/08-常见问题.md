# 08 常见问题

## 适用范围

- 出现白屏、路由失败、接口异常、端差异问题时使用。

## 规则

- 排查顺序固定：配置 -> 路由 -> 请求 -> 状态 -> 平台能力。
- 先复现再修复，记录复现条件与日志。
- 修复后补最小回归用例，避免同类问题反复出现。
- 页面初始化尽量先渲染框架结构，再异步补数据，降低白屏感知时间。
- 页面转场卡顿优先排查：`onLoad/onShow` 重逻辑、`onPageScroll` 高频样式改动、首屏静态 DOM 过大。
- 静态资源与页面跳转异常优先排查“运行时路径是否误用相对路径”。
- 组件未渲染优先排查：组件引用方式（easycom/显式导入）是否与当前写法匹配。
- 脚本导入异常优先排查：`js` 引用是否误用了 `/` 开头路径、`node_modules` 是否在项目根目录。
- 样式未生效优先排查：`@import` 是否写在 `<style>` 内、路径是否为相对路径、语句是否以 `;` 结束。
- `json` 导入异常优先排查：路径写法（相对路径或 `@/`）与别名语义（uni-app/CLI）是否一致。
- 静态资源异常优先排查：是否误把非 `static` 资源当作模板直链路径使用。
- 平台报错优先排查：是否误用浏览器全局对象（`window/document/navigator`）导致非 H5 端异常。

## 示例

- 页面白屏：先查 `pages.json` 注册，再查编译报错。
- 接口 401：先查 token 注入，再查登录态恢复流程。
- 白屏优化：首屏只保留必要节点，复杂模块延后加载并加骨架占位。
- 卡顿优化：把非首屏请求放到首屏渲染后，滚动事件里只做轻量状态更新。
- 图片 404：先检查 `src` 是否为 `/static/...` 绝对路径，再检查资源是否真实存在。
- 跳转失败：先检查 `url` 是否为 `/pages/...` 绝对路径，再检查 `pages.json` 注册。
- 组件不生效：先检查标签命名是否命中 easycom，再检查是否需要显式导入与注册。
- 脚本导入失败：先把 `/common/a.js` 改成 `@/common/a.js` 或相对路径，再检查别名配置。
- 第三方库报错：若提示 `window/document` 未定义，先判定该库是否仅支持 H5。
- 样式不生效：先检查 `@import "./index.css";` 写法，再检查样式文件相对路径是否正确。
- `json` 读取异常：先确认 `import` 路径，再确认目标平台条件编译后字段是否存在。
- 图片不显示：先确认资源在 `static`（可直链）还是非 `static`（需 `import` 绑定）。
- `window is not defined`：先定位调用点，再改为 `uni` API、条件编译或平台适配层实现。
- App 样式异常：先确认页面是 `vue` 还是 `nvue`，按渲染机制分别排查。

## 反例

- 未定位根因直接改代码，导致症状迁移。
- 只在一个端验证就关闭问题单。
- 进入页面立即执行多段同步计算，阻塞首屏渲染。
- 在 `onPageScroll` 中频繁改动布局与样式，导致滑动掉帧。
- 在组件内用 `../static/a.png` 动态拼接路径，迁移页面后大量资源失效。
- Options API 页面只 `import` 不注册组件，运行时出现未定义告警。
- 在 uni-app 项目中把 `node_modules` 放进子目录，导致构建和运行时模块找不到。
- 在样式里写 `@import "/styles/base.css"` 或省略分号，导致编译或加载失败。
- 在 CLI 项目中错误理解 `@` 指向，导入 `json` 时频繁报模块不存在。
- 在模板中直接引用非 `static` 路径，某些端构建后资源丢失。
- 在小程序/App 代码里直接访问 `window/document`，上线后主流程报错。

## 检查项

- 是否有清晰复现步骤与结论。
- 根因是否被确认并可解释。
- 是否有回归验证结果与风险说明。
- 首屏渲染时长是否可接受，是否存在明显白屏。
- 页面切换与滚动是否有掉帧或卡顿。
- 动态资源路径和跳转路径是否统一为运行时绝对路径。
- 组件引用方式是否与页面写法一致且可命中（easycom 或显式导入注册）。
- `js` 模块路径与第三方依赖位置是否符合规范。
- 样式 `@import` 写法是否符合规范（位置/路径/分号）。
- `json` 路径与字段在目标端是否可用（含条件编译差异）。
- 资源路径是否符合“`static` 直链、非 `static` import 后绑定”规则。
- 是否存在浏览器全局对象误用，及 `vue/nvue` 渲染机制误判问题。

## 来源

- 官方教程（2026-02-11 查阅）：https://uniapp.dcloud.net.cn/tutorial/page.html
- 官方教程（2026-02-11 查阅）：https://uniapp.dcloud.net.cn/tutorial/page-path.html
- 官方教程（2026-02-11 查阅）：https://uniapp.dcloud.net.cn/tutorial/page-component.html
- 官方教程（2026-02-11 查阅）：https://uniapp.dcloud.net.cn/tutorial/page-script.html
- 官方教程（2026-02-11 查阅）：https://uniapp.dcloud.net.cn/tutorial/page-style.html
- 官方教程（2026-02-11 查阅）：https://uniapp.dcloud.net.cn/tutorial/page-json.html
- 官方教程（2026-02-11 查阅）：https://uniapp.dcloud.net.cn/tutorial/page-static-assets.html
- 官方教程（2026-02-11 查阅）：https://uniapp.dcloud.net.cn/tutorial/syntax-js.html
