# Slice 模块业务定义

## 适用范围

- 图片网格切片功能的需求定义、实现边界和验收标准。

## 功能目标

- 上传图片。
- 输入切片行数和列数。
- 基于 Canvas 生成网格切片结果。
- 预览每一张切片。
- 下载切片结果。

## 约束

- 目标平台：H5 + 微信小程序。
- 仅使用前端 Canvas 实现切片，不依赖后端切图服务。
- 页面层不直接写复杂切图逻辑，核心逻辑封装在 `src/utils/image.ts`。
- 输入参数必须校验：`rows > 0`、`cols > 0`、均为整数。

## 主流程

1. 用户上传单张图片。
2. 用户输入 `rows` 与 `cols`。
3. 系统校验输入与图片可用性。
4. 调用切片算法，生成切片数据集合。
5. 页面展示切片预览并提供下载动作。

## 关键规则

- 切片顺序默认按“从上到下、从左到右”输出。
- 当图片宽高无法整除行列时，按向下取整切分，剩余像素归并到最后一行/列。
- 失败场景要给出可读错误信息（如图片加载失败、参数非法、Canvas 不可用）。

## 成功标准

- 输入图片 `1000x1000`，`rows=2`、`cols=2`，输出 4 张切片。
- 每张切片理论尺寸为 `500x500`（含边界归并规则时需符合实现定义）。
- H5 与微信小程序均可完成“上传 -> 切片 -> 预览 -> 下载”主链路。

## 非目标（当前阶段不做）

- 批量图片切片。
- gap/间距切片。
- Zip 打包下载。
- 云端存储与后端任务队列。

## 依赖文档

- `docs/01-项目结构.md`
- `docs/05-组件与样式规范.md`
- `docs/06-多端差异处理.md`
- `docs/07-打包发布.md`
