# 03 状态与缓存

## 适用范围

- 管理登录态、用户信息、跨页状态共享时使用。

## 规则

- 全局状态优先用 Pinia；临时状态留在页面本地。
- 持久化字段最小化，只存必要标识与凭据。
- `uni.setStorage` 与内存状态保持单向同步策略。
- 登出必须清理：token、用户信息、业务缓存。

## 示例

- `auth store` 管理 `token`、`userId`、`profile`。
- 启动时从 storage 恢复最小状态，再拉取详情。

## 反例

- 把整个接口响应对象直接持久化到本地。
- 多处页面各自维护 token，导致状态不一致。

## 检查项

- 是否区分“全局状态”和“页面私有状态”。
- 缓存是否设置失效策略或刷新时机。
- 异常退出后是否能恢复到一致状态。
