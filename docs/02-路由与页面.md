# 02 路由与页面

## 适用范围

- 新增页面、调整导航、修改 `pages.json` 时使用。

## 规则

- 所有页面必须在 `src/pages.json` 显式注册。
- `pages.json` 仅负责页面路由与窗口配置，禁止混入业务状态配置。
- 新建、删除、改名页面时，必须同步维护 `pages.json` 的 `pages` 数组。
- `pages` 数组第一个页面即应用首页（启动页），调整顺序前先评估启动流程影响。
- 页面路径与目录保持一致，避免别名式命名。
- 运行时页面跳转路径统一使用绝对路径（`/pages/...`），避免运行时相对路径歧义。
- 页面参数使用明确字段，避免透传整对象。
- 导航前校验目标页所需参数，缺失则拦截并提示。
- 页面数据初始化优先放 `onLoad`；`onShow` 用于“每次显示都要刷新”的轻逻辑，避免重复重请求。

## 示例

- `path: "pages/order/detail"` 对应 `src/pages/order/detail.vue`。
- 跳转传参：`id`、`from` 等最小必要字段。
- 页面窗口表现（标题、导航栏）统一在 `pages.json` 维护。
- 首屏页放在 `pages[0]`，详情页按业务分组放后续条目。
- `uni.navigateTo({ url: '/pages/order/detail?id=1001' })`。

## 反例

- 页面文件存在但未注册，运行时才发现白屏。
- 通过全局变量临时传参，导致刷新后状态丢失。
- 在页面组件里硬编码窗口配置，导致多处配置漂移。
- 每次 `onShow` 都发重请求且不做节流，导致返回页面明显卡顿。
- 在页面 A 中写 `../detail` 可以跳转，但复用到页面 B 后路径失效。

## 检查项

- `pages.json`、文件路径、跳转代码是否三者一致。
- 页面入口参数是否有默认值或异常处理。
- 导航失败是否有明确提示。
- 窗口与路由配置是否集中在 `pages.json`。
- 是否明确区分了 `onLoad` 与 `onShow` 的职责。
- 跳转链接是否全部使用运行时绝对路径。

## 来源

- 官方教程（2026-02-11 查阅）：https://uniapp.dcloud.net.cn/tutorial/project.html
- 官方教程（2026-02-11 查阅）：https://uniapp.dcloud.net.cn/tutorial/page.html
- 官方教程（2026-02-11 查阅）：https://uniapp.dcloud.net.cn/tutorial/page-path.html
